import org.openhab.core.library.types.*
import org.openhab.core.persistence.*
import org.openhab.model.script.actions.*

rule "soundTheAlarm"
when
  Item PIR1 changed from OPEN to CLOSED
then
  sendCommand(AlarmLight, ON)
end

rule "endTheAlarm"
when
  Item PIR1 changed from CLOSED to OPEN
then
  sendCommand(AlarmLight, OFF)
end

rule "FamilyRoomLights"
when
  Item FamilyRoomLights received command
then
	if (FamilyRoomLights.state == ON) {
		// must wait a couple seconds for the command to be run, 
		// otherwise conflict occurs with transmitter?
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 1_on 2_on 3_on")
  	} else { 
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 1_off 2_off 3_off")
  	}
  		
end

rule "SaltLamp"
when
  Item SaltLamp received command
then
	if (SaltLamp.state == ON) {
		// must wait a couple seconds for the command to be run, 
		// otherwise conflict occurs with transmitter?
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 4_on")
  	} else { 
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 4_off")
  	}
  		
end

rule "DansNightstandLamp"
when
  Item DansNightstandLamp received command
then
	if (DansNightstandLamp.state == ON) {
		// must wait a couple seconds for the command to be run, 
		// otherwise conflict occurs with transmitter?
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 5_on")
  	} else { 
	  	executeCommandLine("/opt/433mhz-transceiver/RCSwitch.sh 5_off")
  	}
  		
end

